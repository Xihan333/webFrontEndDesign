

# 项目报告

[TOC]



## 第一部分 项目简介

### 1.系统总体功能介绍

**总体功能需求：**

1.  用户管理（10分）：用户注册、忘记密码（通过邮件发送验证码）、重置密码（检查验证码）、用户信息维护（修改密码、个人信息、邮箱等）。支持管理员、教师、学生三种角色。

2. 前端展示框架（5分）：支持二级菜单导航、系统logo、个人头像，版权说明分区布局显示

3. 基本信息维护（5分）：学生和教师网页中相关展示的个人信息的维护

4. 课程中心（10分）：课程管理、选课管理、成绩管理等。

5. 学工管理（10分）：社会实践、课外活动、成果奖励、学生互评

6.  学生主页（15分）：个人简介、照片、博客、用户画像（数据统计和行为分析）。

7.  教师主页（5分）：个人简介、照片、研究方向、讲授课程、论文著作等。

提示：课程功能可参考学院的类似系统。

**非功能性需求：**

1. 用户体验（10分）：界面美观、布局协调、导航便捷（多级导航）、操作流畅。可用CSS样式、UI框架（如Element-UI）、图片、动画、音乐、视频、表格插件、富文本编辑插件等方式完善设计。

2. 程序质量（10分）：具备输入校验（必填、数值/文本类型、格式）、系统运行稳定（遇到异常不崩溃、有反馈）、会话管理正确（有登录状态和权限校验，刷新页面后能够保持会话）、验证码。

3. 数据设计（10分）：表和字段命名规范、约束健全（主键、唯一、非空等）、关系完备（通过外键实现，可导出E-R图）。

4. 文档质量（10分）：实验报告包括项目简介、需求分析、架构设计、数据设计、使用说明等内容。

### 2.开发环境介绍

#### 语言开发集成环境：

- IntelliJ IDEA
- VS code

#### 硬件环境：

- Windows 11 X64环境

### 3.开发技术介绍

####  （1）前端:

- Vue

  Vue 是一种用于构建用户界面的渐进式JavaScript框架。它易于上手且灵活，特别适合单页面应用（SPA）。Vue 强调声明式渲染和组件化架构，这意味着你可以通过简单地描述界面应该呈现的状态来构建复杂的界面。此外，Vue 的生态系统提供了路由、状态管理等强大的功能，使得开发大型应用变得更加高效。

- Element-plus

  Element-plus 是一款基于 Vue 3 的桌面端组件库，它提供了一整套丰富的、可重用的组件，如表格、对话框、菜单等，极大地加速了基于 Vue 的界面开发过程。Element-plus 的设计风格简洁、现代，且易于自定义，能够帮助开发者快速构建美观且功能丰富的应用界面。

- JavaScript

  JavaScript 是一种高级编程语言，用于网页开发、服务器端开发等多个领域。作为一种解释型语言，JavaScript 主要用于添加交互性和动态效果到网页上。它是万维网的三大核心技术之一，与HTML和CSS共同工作。JavaScript 支持面向对象、命令式及函数式编程风格，灵活性和广泛的应用使其成为开发者的首选。

- TypeScript

  TypeScript 是 JavaScript 的一个超集，它在 JavaScript 的基础上添加了静态类型检查。这意味着开发者可以在代码中定义变量和函数的类型，这样就可以在编译时捕获许多潜在的错误。TypeScript 的类型系统是可选的和灵活的，可以为大型项目带来更高的稳定性和可维护性。它完全兼容JavaScript，并且可以利用JavaScript的丰富生态系统。

- Echarts

  Echarts 是一个使用 JavaScript 实现的开源可视化库。它提供了丰富的图表类型，如折线图、柱状图、散点图等，非常适合于数据的图形化表示。Echarts 易于上手，支持高度自定义，并且能够轻松地嵌入到网页中。其优秀的交互性和出色的性能使其成为数据可视化项目的优选工具。 

- v-md-editor

  v-md-editor 是一款基于 Vue 的 Markdown 编辑器，它为用户提供了一个易于使用的界面来编写和预览Markdown文档。v-md-editor 支持多种扩展和自定义配置，例如代码高亮、主题更换等，能够满足多样化的编辑需求。此外，它的响应式设计保证了在不同设备上的良好体验。

- Axios

  Axios 是一个基于 Promise 的 HTTP 客户端，用于浏览器和 node.js。它使得发送 HTTP 请求变得简单和灵活。Axios 具有广泛的特性，包括从浏览器中创建 XMLHttpRequests 和从 node.js 发出 http 请求、支持 Promise API、拦截请求和响应、转换请求和响应数据等。

#### （2）后端：

- Spring Boot

  项目使用Spring Boot作为后端开发框架，Spring Boot是由Pivotal团队提供的一套开源框架，可以简化spring应用的创建及部署。作为一个强大的开发框架，它不仅提供了快速启动器和自动配置，还整合了大量的开发工具和库。这使得开发者能够更专注于业务逻辑的实现，而不必花费大量时间在配置和集成上。同时，Spring Boot 的内置容器简化了应用程序的部署流程，使得团队在项目开发时更加便捷。

- Spring Data Jpa

  Spring Data JPA： JPA（Java Persistence API）即java持久化API，是spring提供的一款对于数据访问层（Dao层）的框架，为数据库操作提供了一种简单的抽象方式，将 Java 对象与数据库表之间建立映射关系。使用Spring Data JPA，只需要按照框架的规范提供dao接口，不需要实现类就可以完成数据库的增删改查、分页查询等方法的定义，不仅提供了更加面向对象的数据库操作方式，还简化了数据持久化的代码编写，减少了手动编写 SQL 查询语句的工作量。

- Spring Security

  Spring Security 是一个功能强大的安全框架，为应用程序提供了全方位的安全性保障。它支持身份验证、授权、攻击防范等功能，能够有效地保护系统免受各种恶意攻击，并管理用户的权限和访问控制。

- Redis

  Redis 是一种高性能的键值存储数据库，广泛用于临时数据的存储和缓存。它不仅具有出色的读写性能，还支持多种数据结构，如字符串、哈希、列表等。在本项目中，利用 Redis 存储邮箱验证码信息，并设置有效期为5分钟，为用户身份验证提供了便捷而高效的解决方案。

- Lombok

  Lombok 是一款方便实用的 Java 库，通过注解来消除样板代码，例如生成 getter、setter、toString 等方法。这种自动生成代码的方式极大地简化了开发流程，让团队成员可以更专注于业务逻辑的实现，而不必为常规的代码编写而烦恼。

## 第二部分 需求分析

### 产品功能信息结构图

![mmexport1701692218428(1)](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312281446013.png)

### 需求描述

#### 通用功能

1. **登录注册**

​	三种角色的登录，登录成功换页，登录失败提示

​	教师与学生注册，通过邮箱发送验证码，密码强度判断，注册成功后跳转至登录页面，失败提示

​	找回密码（邮件验证码），重置密码

​	前端框架展示：二级菜单导航，系统logo，个人头像，版权说明，分区布局显示

2. **基本信息维护**

   密码，邮箱，手机，地址、身份证号，个人简介

   \* 密码复杂性的要求

   *身份证号合法性判断

   *手机号前三位是否合法

   *个人简介可Markdown编辑

#### 学生端

1. 个人主页

   点击照片可进行修改修改（上传、缩放、存储方法）

   基本信息展示

   数据统计和行为分析：根据学生GPA以及分数数据进行分析并绘制图表

   奖励/实践清单：分栏展示该学生经审核通过的成果与社会实践

   个人简介：使用Markdown预览查看该学生简介

2. 课程中心

   - 选课系统

     选课开启时间内可选择课程及退课操作

     冲突检测：上课时间、剩余容量是否冲突

     条件筛选：通过课程名、课序号、教师、类型、节次进行筛选

   - 查看课表

     将已选课程呈现在学生课表上，按类型赋予不同颜色

     悬停显示课程详细信息

   - 查看成绩

     根据教师端后台赋分计算总成绩并展示

     查看该课程在班级内的排名

3. 学工管理

   - 社会实践（主题、名称、时间、地点、成果、审核状态）

     可对时间以及审核状态进行排序或筛选

   - 课外活动（主题、时间、地点、介绍）

   - 成果奖励（名称、类别、级别、时间、内容、审核状态）

   - 学生互评

     根据班级查看本班同学名单

     可查看对应同学主页，并对其进行匿名评价

     查看历史评论列表（查看内容和删除）

     查看对我的评论（仅显示时间和内容）

4. 博客系统

   显示所有文章（标题、摘要、发布时间、作者）

   查看我发布的文章（同上）

   点击文章可查看详细内容（Markdown渲染）

   对我的文章进行修改和删除操作

   发布新文章（Markdown编辑、标题、摘要、标签）

#### 教师端

1. 个人主页

   点击照片可进行修改修改（上传、缩放、存储方法）

   基本信息展示

   发布论文列表

   个人简介：使用Markdown预览查看该教师简介

2. 课程中心

   - 查看课程

     查看该教师任教课程信息

   - 成绩管理

     查看选课学生名单并对其成绩进行编辑操作（可对学生及课程进行筛选）

3. 论文管理（名称、作者、发表时间）

   实现基本增删改查

#### 管理端

1. 学科管理

   对学科进行统筹管理，包括：开设单位、年级、名称、课序号、学时、学分、类型、介绍

   实现基本增删改查

2. 课程管理

   通过课序号关联课程与教师，实现同一科目多人任教

   包括：教师工号、教师名称、课容量、上课时间、地点

   实现基本增删改查

   选课状态按钮管理

3. 人员管理

   - 学生管理（姓名、学号、性别等基本信息）

     实现基本增删改查

   - 教师管理（姓名、工号、性别等基本信息）

     实现基本增删改查

   - 班级管理

     班级基本信息（名称、年级、学院）并实现增删改查

     查看班级学生列表（学号、姓名、性别等基本信息）

     查看未分配班级的同学（基本信息）并为其分配现有班级

4. 学工管理

   - 社会实践（学生姓名、学号、主题、名称、时间、地点、成果、审核状态）

     可对时间以及审核状态进行排序或筛选

     对社会实践条目进行审核

   - 成果奖励（学生姓名、学号、名称、类别、级别、时间、内容、审核状态）

     同上

   - 学生互评（评价人与被评价人学号、姓名、评价内容、评价时间）

     对其进行查看和删除操作

## 第三部分 架构设计

### 设计系统的总体架构

系统中采用的开发框架是Spring Boot。Spring Boot遵循一个分层的体系结构，其中每个层都与其直接在其下方或上方的层（层次结构）进行通信。

本系统基于web的B/S架构设计完成,前端使用vue.js+ElementPlus进行前后端分离,前端框架采用了比较流行的渐进式javaScript框架Vue.js。使用Vue-Router和Vuex实现动态路由和全局状态管理,Axios实现前后端通信，Element Plus组件库使页面快速成型。主要编程语言为nodejs和mysql。

采用Spring Boot 开发框架，可以通过大量的自动配置来简化开发，可以更加专注于业务逻辑部分代码的开发，减少了工作量，同时加快了开发速度。对于追求效率和简洁方便的开发者来说如虎添翼。同时也摆脱了复杂的配置工作以及依赖的管理工作，避免了大量的样板代码和配置，减少出错和延误。

系统采用前后端分离，通过前端views层和后端controller层的连接，将前端界面对应的方法传到后端，后端仅返回前端所需的数据，前端负责渲染HTML页面，后端不再控制前端的效果，用户看到什么样的效果，从后端请求的数据如何加载到前端中，都由前端自己决定，后端仅仅需要提供一套逻辑对外提供数据即可，并且前端与后端的耦合度相对较低，在这种模式中，我们通常将后端开发的每个视图都成为一个接口，或者API，前端通过访问接口来对数据进行增删改查。后台负责提供数据，前端负责数据展示，职责分离，分工明确。

同时面向接口的编程思想始终贯穿前后，实际开发出来的代码十分的简洁，而且逻辑清晰明确，也提高了功能类的代码复用率。

**Views层:**

Views层负责展示模型数据，接收客户请求，并将业务处理最后的结果呈现给用户。基于渐进式框架Vue.Js的实现，通过调整页面结构和命名匹配规则，将接收到的数据在经过描述渲染后，最终展示页面给用户浏览。由于Views的开发框架自动完成，所以只需不断调整，就可以做到对页面结构的不断调整。

**Controller层：**

Controller层，负责具体的业务模块流程的控制，控制的配置也同样是在Spring的配置文件里进行，针对具体的业务流程，会有不同的控制器。

作为Model和Views之间的沟通桥梁，Controller层用于响应用户请求，委托Model处理，选择Views，并把Model返回的数据递交给Views。由于该信息管理系统的业务逻辑处理相对简单，所以在controller层一并实现，而不再设计service层。而且该层也解决了页面代码与业务逻辑代码之间耦合的问题，通过对用户请求进行拦截，然后分别在相应的Controllers类中进行处理，将处理结果返映给Model层，对数据库中数据进行CURD，最后将结果返回页面。

我们具体的设计过程可以将流程进行抽象归纳，设计出可以重复利用的子单元流程模块。这样不仅使程序结构变得清晰，也大大减少了代码量。

**Model层：**

Model层属于数据层,用于做数据库的操作,主要是增删查改,在基础的mvc划分中,model层还需要处理数据验证使用JPA对数据库进行数据持久化操作，而且 JPA的API定义的规范提供了数据库的基本操作，不必再纠结于复杂的SQL代码的开发，同时JPA约定了面向对象的查询语言，将以往面向数据库表的查询，改变为面向实体类进行的数据查询。

Model层中存放有实体类，其中的对象与数据库中的属性值基本保持一致，实现了数据库中字段与对象属性之间的映射，因此只要在开发中定义好实体类之间的关系，数据库中表与表之间的关系也就确定了。

而且Model中还包括了成员变量的get/set方法等功能。

 

### 系统工作流程

基于以上的系统架构，可以这样描述该系统的工作流程：

**前端模块**

登录页面由一个表单构成，输入框输入账号和密码并选择相对应的登录身份，输入成功后跳转到信息管理页面。信息管理页面分为三个，分别是学生端个人主页，教师端个人主页，管理员端信息管理。

信息管理页面可以对学生教师等信息进行管理，并可以通过姓名学号查询，包含基本信息以及课程、日志管理、活动、竞赛、学生荣誉等信息。

**后端模块**

表现层用来接受数据和返回数据。采用RestFul接口风格，通过接口的类别区分接口的功能。

服务层是具体业务实现的地方。对表现层的数据进行处理，并调用持久层的接口，对数据进行增删查改以及进行相关的级联操作。

因为数据库方面采用的是逻辑外键，需要在服务层对表与表之间的关联进行相关操作。

持久层是访问数据的地方。采用了MyBatis框架，对数据库的访问进行了封装，通过关联数据库表相关的实体，完成对象关系映射，简化了数据库的操作。

**各层概要设计**

在Views层中，利用基于渐进式框架Vue.Js描述的页面结构构建形成相应的页面，以实现用户与系统之间的交互界面。利用该页面传送用户的操作请求request和接受系统返回的响应response。

​	在系统接收到操作请求后，不同的请求在controllers中相应的控制器中进行处理，并且根据controllers处理后返回的数据，影响对应的响应页面。

​	在Controller层中，controllers内构造的方法负责提供实体对象和数据，将其反映给前端界面，同时controllers中负责分派用户请求，然后调用对应的repository接口进行业务处理实现对相应数据的增删改查操作，最后把结果返回到前端界面。

​	在Model层中，利用JPA的对象——关系表的映射关系，实现实体对象与数据库表之间的映射，并将运行期的实体对象持久化到数据库中，通过继承JpaRepository，使用其中的增删改查，分页等的方法，实现与数据库之间的交互，同时通过接口返回相应的操作结果。

​	利用上述的系统架构进行开发，可以将views，controller，model之间进行较好的分离，三层之间全都面向接口。 

而也是因为接口的实现，不同层之间不会相互产生影响，这提高了系统的可复用性，以及开发的灵活性。同时耦合度小也有利于我们的小组成员选择自己擅长的开发方向进行设计，大幅度提高了团队开发的效率。

## 第四部分 数据设计

### Er图

### 数据库结构

## 第五部分 使用说明

### 邮箱注册及找回密码

验证码存储在本地运行的redis中（设置5min有效期，5min后验证码会失效），若要使用该功能，需在本地运行redis，请设置端口号及密码如下：

```
port: 6379
password: 
```

*redis使用教程：*

1. 安装并运行redis （可以在本地直接安装，也可以使用docker运行redis）

   在docker中使用redis：

   ```shell
   docker pull redis:latest
   docker run -itd --name redis -p 6379:6379 redis
   ```

2. 修改密码：

```shell
CONFIG SET requirepass "your_new_password"
```

若使用docker：

```shell
docker exec -it redis redis-cli
CONFIG SET requirepass "your_new_password"
```

3. 运行该项目即可

若需查看redis存储内容，可使用如Another Redis Desktop等可视化工具

也可以修改后端项目application.yml文件中的redis配置ip地址为自己的服务器ip，redis端口号，密码

### 详细界面说明

#### 1）登录与注册界面

登录页面涉及学生、教师、管理三端，注册页面仅涉及学生和教师端

![image-20231231143822190](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311438918.png)

在对应框中输入用户名和密码，并输入正确的验证码，点击登录，即可跳转至账号对应身份的主页

反馈信息

![image-20231231144054991](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311440035.png)

![image-20231231144125228](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311441251.png)

点击红框中的忘记密码，即可跳转到对应页面

![image-20231231144255971](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311442439.png)

![image-20231231144403217](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311444651.png)

在对应输入框中输入信息，即可成功修改密码

![image-20231231144548647](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311445339.png)

点击注册，跳转到注册页面

![image-20231231144735211](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311447989.png)

选择对应身份，输入信息，并填写正确的邮箱验证码即可注册成功

#### 2） 人员管理模块

​	本部分只涉及管理员端。

1.  用户管理界面：

   该界面主要实现对于整个管理系统后台管理平台的注册的用户（学生或教师）进行展示，通过表格展示所有用户的详细数据，此处以学生端管理为例，教师同理。

​	![image-20231231145104419](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311451546.png)

![image-20231231145254661](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311452908.png)

​		通过红框内输入学工号或者姓名，可对整个用户表进行搜索并展示出对应的内容，如图

![image-20231231145326196](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311453257.png)

​		通过表单中的详细信息，可以实现对用户基础信息的详细查看和编辑

![image-20231231145437814](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311454871.png)

![image-20231231145507875](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311455036.png)

​		**新增**

​		对于新增一个用户信息，可以采用左上角的新增按钮，并填入相应信息，对于红星所表示的信息为必须填入，成功后可点击保		存按钮进行新增操作。

​		![image-20231231145820248](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311458366.png)

![image-20231231145905049](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311459283.png)

​	格式校验

​	![image-20231231150015534](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311500560.png)

在显示新增成功后可在表格末尾看到新增的用户

![image-20231231150106393](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311501431.png)

![image-20231231150138549](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311501622.png)

​		**删除**

​		可通过表格中的删除按钮将该行信息进行删除

​		![image-20231231150247937](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311502002.png)

![image-20231231150312750](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311503873.png)

2. 班级管理界面

   该界面主要实现对于整个管理系统后台管理平台的班级进行展示，通过表格展示所有班级的详细数据。

   ![image-20231231150521674](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311505853.png)

   **新增**

   点击左上角新增按钮，即可跳出弹窗

   ![image-20231231150646173](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311506304.png)

   点击每一行末尾的删除按钮，如图，最后一行班级被删除

   ![image-20231231150759745](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311507793.png)

   ![image-20231231150821932](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311508984.png)

   查询操作，在下拉框中选择学院和年级，点击查询，即可获得对应班级表格

   ![image-20231231150927975](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311509129.png)

   ![image-20231231150949904](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311509051.png)

   也可通过右侧搜索框对班级名称进行搜索

   ![image-20231231151103645](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311511743.png)

   点击按钮查看未分配班级同学

   ![image-20231231151145359](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311511435.png)

   可以对其进行分班操作

   ![image-20231231151212180](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311512232.png)

   ![image-20231231151229081](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311512145.png)

   点击确定，即可在新班级名单下看见该同学

   ![image-20231231151317470](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311513520.png)

#### 3） 课程管理模块

- 管理员端

  1. 学科管理界面

     ![image-20231231151429376](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311514595.png)

     点击左上角新增，即可新增一门学科

     ![image-20231231151535191](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311515338.png)

     ![image-20231231151548355](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311515435.png)

     点击确定，即可在表格末尾看见新增的学科

     ![image-20231231151637207](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311516329.png)

     点击每一行的删除按钮，即可删除该学科

     点击编辑，即可查看学科信息并对其进行修改

     ![image-20231231151754840](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311517005.png)

     ![image-20231231151811546](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311518625.png)

     右上角输入对应课程名或课序号，选择课程类型，即可进行查询操作

     ![image-20231231151841098](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311518256.png)

     ![image-20231231151924388](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311519488.png)

  2. 课程管理界面

     右上角按钮控制选课的开关

     ![image-20231231152008274](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311520376.png)

     输入对应信息即可进行查询

     ![image-20231231152037749](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311520884.png)

     点击左上角新增，弹出弹窗

     ![image-20231231152104836](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311521901.png)

     ![image-20231231152118174](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311521260.png)

     新增成功后即可查看新增的课程

     点击编辑按钮，即可查看课程具体信息，并对其进行修改

     ![image-20231231152214630](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311522683.png)

     点击每一行的删除按钮，即可删除该学科

- 学生端

  1. 选课系统界面

     ![image-20231231154500923](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311545135.png)

     在此页面，学生可以查看所有课程名单，并实现选退课操作

     若不在选课时间内，点击选课系统会弹出提示

     顶部可确定筛选条件，对课程列表进行查询

     ![image-20231231154650136](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311546199.png)

     对未选课程可进行选课，若与已选课程时间冲突，会弹出提示；同时若课容量不足，也会提示

     ![image-20231231154930271](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311549323.png)

     ![image-20231231154809990](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311548046.png)

     ![image-20231231154834992](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311548042.png)

     ![image-20231231154901366](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311549404.png)

     同时可以进行退课操作

     ![image-20231231154943977](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311549045.png)

     ![image-20231231154959373](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311549421.png)

  2. 课表界面

     完成选课后，点击我的课表，即可查看对应课表

     ![image-20231231155059607](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311550769.png)

  3. 查看成绩界面

     选课后，每一门已选课程都与成绩相关联，成绩由授课教师在后台进行编辑和上传，呈现在学生端

     ![image-20231231155210282](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311552452.png)

     点击查看排名，即可获取自己在该门课所有选课学生中的名次

     ![image-20231231155249915](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311552960.png)

     ![image-20231231155305468](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311553535.png)

- 教师端

  1. 查看课程界面

     教师可以在这个界面查看自己任教的课程

     ![image-20231231161918197](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311619275.png)

  2. 成绩管理界面

     对选课学生进行成绩上传

     ![image-20231231162058572](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311620695.png)

     左上角输入学生学号或选择任教课程进行查询

     ![image-20231231162137371](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311621426.png)

     点击编辑按钮，对学生成绩进行修改

     ![image-20231231162201016](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311622096.png)

     ![image-20231231162212578](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311622615.png)

     若成绩不符合规范，会弹出提示

     ![image-20231231162237711](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311622770.png)

#### 4） 学生互评管理模块

- 管理端

  互评管理可以查看所有评论以及双方信息，管理仅可对评论进行查看和删除操作

  ![image-20231231152419855](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311524084.png)

  输入对应信息即可进行查询

  ![image-20231231152530007](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311525090.png)

  点击查看，可查看每条评论的具体信息

  ![image-20231231152633511](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311526631.png)

  ![image-20231231152650474](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311526549.png)

  点击删除，可删除该评论，以避免不良言论的出现

  ![image-20231231152705839](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311527884.png)

  ![image-20231231152717495](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311527535.png)

- 学生端

  学生能查看本班所有同学的列表

  ![image-20231231155414981](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311554067.png)

  点击查看主页，即可跳转至对应同学的主页，查看他的详细信息

  ![image-20231231155451451](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311554549.png)

  ![image-20231231155508916](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311555994.png)

  点击评价，弹出评价弹窗，编辑评价信息即可

  ![image-20231231155546510](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311555586.png)

  ![image-20231231155602673](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311556789.png)

  ![image-20231231155615740](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311556770.png)

  点击查看历史评论按钮，即可查看我发出的评论历史

  ![image-20231231155650855](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311556938.png)

  ![image-20231231155707085](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311557138.png)

  在此处可以对评论进行删除操作

  ![image-20231231155852546](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311558609.png)

  ![image-20231231155904854](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311559882.png)

  点击查看我的评论按钮，即可查看别人对我的所有评论（匿名）

  ![image-20231231155739132](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311557202.png)

  ![image-20231231155805658](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311558787.png)

#### 5） 学工管理/论文管理模块

- 管理端

  管理需要对社会实践以及成果奖励两部分进行审核，此处以社会实践为例

  ![image-20231231152904579](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311529785.png)

  输入对应信息即可进行查询

  ![image-20231231152935614](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311529772.png)

  也可以通过表格的筛选功能，对审核状态进行筛选

  ![image-20231231153019911](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311530037.png)

  点击查看，可查看每条社会实践的具体信息

  ![image-20231231153145694](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311531812.png)

  在详细信息页面，可以对其进行审核操作

  ![image-20231231153205208](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311532363.png)

  ![image-20231231153242975](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311532028.png)

  弹窗关闭，即可看见审核状态的更新

  点击删除，可删除该社会实践

  ![image-20231231153331866](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311533955.png)

  成果奖励管理页面同理，此处仅做展示

  ![image-20231231153907761](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311539941.png)

- 学生端

  学生可以在该模块对社会实践、课外活动、成果奖励三部分进行增删改查的操作，此处以社会实践为例，其他模块类似

  ![image-20231231160039970](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311600110.png)

  点击左上角新增按钮，弹出新增弹窗

  ![image-20231231160110569](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311601672.png)

  ![image-20231231160124237](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311601417.png)

  输入查询内容，即可对社会实践栏目进行筛选

  ![image-20231231160204041](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311602086.png)

  点击查看按钮，可对现有社会实践进行查看和编辑操作，注意，若编辑已通过的社会实践，则审核状态将变为待审核

  ![image-20231231160250912](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311602009.png)

  ![image-20231231160303318](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311603389.png)

  删除社会实践

  ![image-20231231160332676](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311603798.png)

  ![image-20231231160353699](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311603729.png)

- 教师端

  教师端论文管理，与学生端相似，此处仅做图片展示

  ![image-20231231161833054](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311618206.png)

#### 6） 个人主页与模块 

本页面仅涉及学生与教师端，且学生端内容包含教师端的功能，所以仅对学生端进行具体阐述

- 学生端

  ![image-20231231154123442](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311541559.png)

  ![image-20231231154259682](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311542821.png)

  如图所示，在个人主页界面，首先呈现个人基本信息与头像；而后是相关的教育背景，例如绩点、成绩区间等；再往后是个人荣誉的展示，最后还有个人简介。

  可以在账号安全/修改个人信息页面中对基本信息和个人简介进行修改。修改成功后主页展示内容也会相应变更

  ![image-20231231154348499](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311543686.png)

- 教师端

  ![image-20231231161804437](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311618555.png)

#### 7）博客系统模块

此模块仅涉及学生端。

1. 查看所有文章界面

   该页面以时间倒序显示所有博客，右侧展示学生信息和评论

   ![image-20231231160544965](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311605153.png)

   在搜索框中输入内容，可对博客进行搜索

   ![image-20231231160618152](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311606187.png)

   点击博客卡片，可以跳转至博客详情

   ![image-20231231160655261](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311606357.png)

   ![image-20231231160711872](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311607049.png)

   点击右侧查看文章按钮，可以进入我的文章页面

   ![image-20231231160810486](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311608616.png)

2. 我的文章界面

   ![image-20231231160840336](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311608420.png)

   点击博客卡片中的编辑按钮，可对博客进行编辑

   ![image-20231231161037074](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311610142.png)

   ![image-20231231161051580](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311610654.png)

   点击删除操作，可删除对应博客

   ![image-20231231161138469](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311611507.png)

   点击写新文章按钮，即可进入发布新文章界面

   ![image-20231231161411532](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311614578.png)

3. 发布新文章界面

   ![image-20231231161506024](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311615140.png)

   可以用Markdown语法对文章内容进行撰写

   底部设定标签以及文章摘要

   ![image-20231231161703633](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312311617706.png)

## 第六部分 特色功能

想了想，感觉可能比较特色的功能（指可以写一堆文字来凑字数），亟待补充

### 邮箱校验&验证码

### 学科和课程（开关选课）

### 班级管理

学生端手动修改班级、专业、年级等固定信息，容易导致分班混乱难以控制，班级和专业将沦为单纯的字符串；同时，管理员在学生管理界面无法便捷地为每一位学生确定班级和专业，多次输入容误差概率显著提升。为了避免这些现象，将班级真正地利用起来并实现统一的管理，我们增加了班级管理这一模块。

班级Model部分如下：

```java
@Data
@NoArgsConstructor
@AllArgsConstructor
@Entity
@Table(	name = "clazz",
        uniqueConstraints = {
        })
public class Clazz {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer clazzId;

    private String clazzName;

    @ManyToOne
    @JoinColumn(name = "grade_id")
    private Grade grade;

    @OneToOne
    @JoinColumn(name="capmus_id")
    private Campus campus; //学院
}
```

前端展示时，页面完成挂载后调用`getClazzOptionItemListByGradeId`获取班级数据，并呈现在表格中

![image-20231230011237361](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300112549.png)

接口代码如下：

```java
 public DataResponse getClazzOptionItemListByGradeId(DataRequest dataRequest) {
       Integer gradeId=dataRequest.getInteger("gradeId");
       if(gradeId == null){
           List<Clazz> sList = clazzRepository.findAll();
           return CommonMethod.getReturnData(getClazzMapList(sList));
       }
       List<Clazz> sList = clazzRepository.findClazzListByGradeGradeId(gradeId);
       return CommonMethod.getReturnData(getClazzMapList(sList));
  }
```

前端请求部分如下：

```javascript
onMounted(async ()=> {
    updateTableData()
})

const updateTableData = async () => {
  const res = await request.post('/clazz/getClazzOptionItemListByGradeId',{
    data:{
      gradeId:'' //获取所有班级
    }
  })
  tableData.value = res.data.data
  filterTableData.value = res.data.data
}
```

新增班级时，通过下拉框选择班级所属学院和年级，极大降低了手动输入带来的误差，调用`clazzEditSave`接口完成新增操作。

![image-20231230011836910](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300118962.png)

接口代码如下：

```java
public DataResponse clazzEditSave(DataRequest dataRequest) {
        Integer clazzId = dataRequest.getInteger("clazzId");  //获取clazz_id值
        Map clazz = dataRequest.getMap("clazz");
        String clazzName = CommonMethod.getString(clazz,"clazzName");
        Integer gradeId = CommonMethod.getInteger(clazz,"gradeId");
        Integer campusId = CommonMethod.getInteger(clazz,"campusId");
        Clazz a = null;
        Optional<Clazz> op;
        if(clazzId != null) {
            op= clazzRepository.findByClazzId(clazzId);  //查询对应数据库中主键为id的值的实体对象
            if(op.isPresent()) {
                a = op.get();
            }
        }
        if(a == null){
            clazzId = getNewClazzId(); //获取Clazz新的主键
            a = new Clazz();
            a.setClazzId(clazzId);
        }
        Optional<Grade> og = gradeRepository.findByGradeId(gradeId);
        Grade grade;
        if(og.isPresent()){
            grade = og.get();
        }else{
            return CommonMethod.getReturnMessageError("年级不存在！");
        }
        a.setGrade(grade);
        a.setClazzName(clazzName);
        Optional<Campus> oc = campusRepository.findByCampusId(campusId);
        Campus campus;
        if(oc.isPresent()){
            campus = oc.get();
        }else{
            return CommonMethod.getReturnMessageError("学院不存在！");
        }
        a.setCampus(campus);
        clazzRepository.saveAndFlush(a);//插入新的Clazz记录
        return CommonMethod.getReturnData(a.getClazzId(),"修改或新增成功");  // 将ClazzId返回前端
    }
```

点击查看未分配班级同学按钮，即可查看暂未分班的学生（数据库中clazz_id为空），调用`getNoClazzStudents`接口获取学生名单，同时调用`getClazzOptionItemListByGradeId`接口获取现有班级列表

![image-20231230012721873](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300127914.png)

为避免出现同班级名称不同年级的情况，在下拉框中将`label`调整为`gradeName`与`clazzName`的组合

![image-20231230012939242](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300129322.png)

```vue
 <div class="dialogContent">
        <div class="clazzName">
          <p>选择班级</p>
          <el-select v-model="clazzId" value-key="id"
          placeholder="请选择班级" clearable @change="changeSelect">
              <el-option
              v-for="item in clazzData"
                :key="item.clazzId"
                :label="item.gradeName+' '+item.clazzName"
                :value="item.clazzId"
              />    
        </el-select>
       </div>
</div>
```

点击班级管理首页的班级名称，即可跳转至班级学生列表：

![image-20231230013252572](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300132687.png)

同样，在页面挂载结束后，像后端发送请求，调用接口`getStudentOptionItemListByClazzId`，通过store实现不同页面间的数据传递。

删除班级时，调用`clazzDelete`接口，将该班级中的所有学生`clazzId`清空，即恢复到无班级状态

```java
public DataResponse clazzDelete(DataRequest dataRequest) {
        Integer clazzId = dataRequest.getInteger("clazzId");  //获取clazz_id值
        Clazz a = null;
        Optional<Clazz> op;
        if(clazzId != null) {
            op= clazzRepository.findByClazzId(clazzId);  //查询对应数据库中主键为id的值的实体对象
            if(op.isPresent()) {
                a = op.get();
            }else{
                return CommonMethod.getReturnMessageError("班级不存在！");
            }
        }
        if(a != null) {
            List<Student> studentList = studentRepository.findStudentListByClazzClazzId(clazzId);
            for(Student s: studentList){
                s.setClazz(null);
            }
            clazzRepository.delete(a);//删除该班级
        }
        return CommonMethod.getReturnMessageOK("删除成功");  //通知前端操作正常
    }
```

通过班级管理这一功能，将学生与年级、学院有效对应，同时为后续的互评功能奠定基础，使项目逻辑更加严密。

### echarts图表（虽然大家都用但还是特色！）

为了直观展现用户动态和进行行为分析，兼顾学生主页的丰富性和美观需求，特引入`echarts`库进行统计图表的绘制。

1. 配置与导入：

   通过`npm`获取`echarts`，这里获取特定版本

   ```
   npm install echarts@4.9.0 --save
   ```

   在main.js中增加设置

   ```javascript
   //echart
   import * as echarts from 'echarts';
   app.config.globalProperties.$echarts = echarts;
   ```

2. 在`Homepage.vue`中使用`echarts`

   学生主页共有两个图表，一个是GPA占比的饼状图，另一个为成绩等级数量的玫瑰图，下面是这两张图表的`js`部分：

   ![image-20231230021119048](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300211089.png)

   ```javascript
   //饼状图
   const userInfo = ref({
       //其他属性
       gpa:'',
   })
   const dom1 = document.getElementById('myChart');
       const myChart = echarts.init(dom1); // 初始化echarts实例
       const option1 = {
         series: [{
             color:["#6FB6C1","#e6e6e6"],
             type: 'pie',
             data: [
                 {
                 value: userInfo.value.gpa,
                 name: 'GPA:'+ userInfo.value.gpa
                 },
                 {
                 value: 5-userInfo.value.gpa,
                   name: '满分5'
                   },
               ],
               radius: '50%'
           }]
       };
     // 设置实例参数
     myChart.setOption(option1);
   
   ```

   ![image-20231230021244157](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300212210.png)

   ```javascript
   //玫瑰图 
   const dom2 = document.getElementById('scoreChart');
       const scoreChart = echarts.init(dom2);
       const option2 = {
           series: [{
           color:["#6FB6C1","#a094c3","#ccdead","#dbc4a7","#c16f6f"],
           type: 'pie',
           data: markList.value,
           roseType: 'area'
           }
       ]};
       // 设置实例参数
       scoreChart.setOption(option2);
   ```

   由于后端所传参数markList格式与绘图所需data一致，此处便直接将其值赋给data

   ```
   markList=[
       {name: '优：2', value: 2},
       {name: '良：4', value: 4},
       {name: '中：3', value: 3},
       {name: '及格：1', value: 1},
       {name: '不及格：0', value: 0}
   ]
   ```


### 无孔不入的Markdown

为了实现富文本编辑，丰富可展示信息，以及美化界面，决定引入基于`Vue`开发的轻量级`Markdown`编辑器组件`v-md-editor`，下面是详细介绍。

1. 导入和配置

   通过`npm`下载

   ```
   # use npm
   npm i @kangc/v-md-editor -S
   ```

   若出现报错依赖冲突或`Uncaught TypeError: Cannot read properties of undefined (reading 'config')`等，在命令行运行如下命令即可

   ```
   npm i @kangc/v-md-editor@next -S --legacy-peer-deps
   ```

   在vue中引入轻量版编辑器和预览组件

   ```javascript
   // If you want to use Md-editor, import it.
   import VMdEditor from '@kangc/v-md-editor';
   import '@kangc/v-md-editor/lib/style/base-editor.css';
   import githubTheme from '@kangc/v-md-editor/lib/theme/github.js';
   import '@kangc/v-md-editor/lib/theme/style/github.css';
   
   // highlightjs
   import hljs from 'highlight.js';
   
   VMdEditor.use(githubTheme, {
     Hljs: hljs,
   });
   
   //preview
   import VMdPreview from '@kangc/v-md-editor/lib/preview';
   import '@kangc/v-md-editor/lib/style/preview.css';
   
   VMdPreview.use(githubTheme, {
     Hljs: hljs,
   });
   
   const app = createApp(/*...*/);
   
   app.use(VMdEditor);
   app.use(VMdPreview);
   ```

2. 编辑器组件的使用

   ![image-20231230023756472](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300237607.png)

   ```vue
   <template>
     <v-md-editor v-model="markdown" height="700px" 
               placeholder="# 记录创作灵感 & 美好生活 #"></v-md-editor>
   </template>
   <scrpt>
   const markdown = ref('')
   </scrpt>
   ```

3. 预览组件的使用

   ![image-20231230024209508](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300242665.png)

   ```vue
   <template>
   	<v-md-preview :text="text" class="content"></v-md-preview>
   </template>
   <script>
   	const text = blogInfo.value.content
   </script>
   ```



### 美美嘟课表

### 冲突判断&格式校验

身份证号、手机号、选课时间等冲突

### 学生互评

查看本班同学，查看对应人的主页（如何获取信息）



下面是一些细碎的小部件

### 查询功能的实现（filter方法）

  为了能精准快速地从数据中筛选出符合条件的内容，我们在多数页面都设置了查询功能，由于页面需求的多样性，我们查询的内容和形式也不尽相同，倘若在后端实现查询方法，前端调用接口进行筛选，可能会增加服务器负载，导致相应时间增加。同时出于安全性的考量，采用混合策略，部分筛选在前端执行以提供更快的用户体验，同时后端仍然进行额外的验证和安全性检查。

下述filter过滤方法的应用流程：

以博客部分为例

![image-20231230143126714](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312301431819.png)

前端将后端返回的博客数据存在`blogs`数组中，在搜索框内输入文章标题、作者、文章内容等，点击查询，即可对博客进行筛选。

```javascript
const blogs = ref([])

const search = ref('')
const inputSearch = ref('')
const searchedBlogs = computed(() => blogs.value.filter(
  item =>   //筛选条件，进行模糊查询
    !search.value ||
    item.BlogTitle.toLowerCase().includes(search.value.toLowerCase()) ||
    item.name.toLowerCase().includes(search.value.toLowerCase()) ||
    item.content.toLowerCase().includes(search.value.toLowerCase())
))
const searchFn = () => {
  search.value = inputSearch.value   //修改search的内容
}
```

`template`标签下仅需将`v-for`循环的数组绑定为`searchedBlogs`即可。

```html
<div class="blog" v-for="blog in searchedBlogs" :key="blog.BlogId">
       <div class="content" @click="handleClickBlog(blog)">
           <h2 class="title">{{ blog.BlogTitle }}</h2>
           <p class="date">发布于 {{blog.createTime}} | {{ blog.name }}</p>
           <p class="summary">{{ ellipsis(blog.digest,blog.content) }}</p>
       </div>
</div>
```

### 数据分页（pagination）

当数据量过多时，使用分页分解数据。由于多数页面同时伴随着查询功能，所以我们将查询后的数据再进行分页。

```javascript
// 分页相关
const currentPage = ref(1)
const paginatedBlogs = computed(() => searchedBlogs.value.slice((currentPage.value - 1) * 15, currentPage.value * 15))
const handleSizeChange = () => {
  currentPage.value = 1
}
```

`template`标签下仅需将`v-for`循环的数组绑定为`paginatedBlogs`即可。

```html
 <div class="blog" v-for="blog in paginatedBlogs" :key="blog.BlogId">
            <div class="content" @click="handleClickBlog(blog)">
                <h2 class="title">{{ blog.BlogTitle }}</h2>
                <p class="date">发布于 {{blog.createTime}} | {{ blog.name }}</p>
                <p class="summary">{{ ellipsis(blog.digest,blog.content) }}</p>
           </div>
 </div>
<!-- 对组件进行配置 -->
 <el-row class="pagination">
        <el-col>
            <el-pagination
            background
            :hide-on-single-page="false"
            v-model:current-page="currentPage"
            default-page-size = "15"
            :pager-count="7"
            layout="total, prev, pager, next, jumper"
            :total="searchedBlogs.length"
            @size-change="handleSizeChange"
            />
        </el-col>
 </el-row>
```



### 整体页面布局

### store 传参（以班级管理为例）

点击班级管理首页班级列表中的名称，即可跳转至对应班级的学生名单页面

`ClazzManage.vue`

![image-20231230011237361](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300112549.png)

`classmate.vue`

![image-20231230013252572](https://cdn.jsdelivr.net/gh/Xihan333/imgRep/202312300132687.png)

具体实现方法如下：

```javascript
// @/stores/app.ts
export const useAppStore = defineStore('app', () => {
  /* 其他数据 */
  const classmate = ref({
    clazzId:"",
    clazzName:""
  })
  return {
    classmate
  }
})
```

```vue
<!--  @/views/admin/ClazzManage.vue -->
<template>
   <!-- -->
    <el-table-column prop="clazzName" label="班级名称" width="auto" align="center">
              <template #default="scope">
                <a href="javascript:" @click="handleClickName(scope)">{{ scope.row.clazzName }}</a>
              </template>
    </el-table-column>
	<!-- -->
</template>
<script>
    import { useAppStore } from '../../stores/app.ts'
    import router from "~/router";
    const store = useAppStore()
	const handleClickName = (clazz) => {
      console.log(clazz.row.clazzName)
      store.classmate = clazz.row
      console.log(store.classmate)
      router.push('classmate')
    }
    
</script>

```

```vue
<!--  @/views/admin/classmate.vue -->
<script>
import { useAppStore } from '../../stores/app.ts'
import { storeToRefs } from 'pinia'

const store = useAppStore()

const { classmate } = storeToRefs(store);
const className = classmate.value.clazzName
const tableData = ref([])
const updateTableData = async () => {
  console.log(classmate.value.clazzName)
  const res = await request.post('/student/getStudentOptionItemListByClazzId',{
    data:{
        clazzId:classmate.value.clazzId
    }
  })
  tableData.value = res.data.data
}
</script>
```



