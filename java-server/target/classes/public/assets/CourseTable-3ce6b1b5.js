import{g as f,c as _,a as g}from"./teachingServ-dd77ce74.js";import{m as d,a as B}from"./messageBox-72a6a563.js";import{d as y,D as c,_ as v,c as n,e as t,w as l,v as i,F as m,p,i as F,o as a,n as u}from"./index-f7ad59d0.js";const D=y({data:()=>({numName:"",courseList:[],courseSelectList:[],deleteId:-1,form:{}}),created(){this.query()},methods:{makeSelectCourseList(){this.courseSelectList=[];for(let s=0;s<this.courseList.length;s++){const o=this.courseList[s];this.courseSelectList.push({id:o.courseId,value:o.num,title:o.num+"-"+o.name})}},async query(){this.courseList=await f(this.numName),this.makeSelectCourseList()},addItem(){this.form={},c("favDialog").show()},editItem(s){this.form=s,c("favDialog").show()},close(){c("favDialog").close()},async confirm(){this.close();const s=await _(this.form);s.code==0?(d(this,"保存成功"),this.query()):d(this,s.msg)},async deleteItem(s){if(!await B("确认删除吗?"))return;const r=await g(s);r.code==0?(d(this,"删除成功"),this.query()):d(this,r.msg)}}}),b={class:"base_form"},E=t("div",{class:"base_header"},[t("div",{class:"blue_column"}),t("div",{class:"base_title"},"课程管理")],-1),C={class:"base_query_oneLine"},k={class:"query_left"},w={class:"query_right"},L=t("span",{style:{"margin-top":"5px"}},"课程号或课程名",-1),I={class:"table_center",style:{"margin-top":"5px"}},A={class:"content"},$=t("tr",{class:"table_th"},[t("td",null,"课程号"),t("td",null,"课程名"),t("td",null,"学分"),t("td",null,"材料路径"),t("td",null,"前序课"),t("td",null,"操作")],-1),S=["onClick"],q=["onClick"],V={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},U=t("div",{class:"base_title"},"课程添加修改对话框",-1),N={class:"dialog-div",style:{"margin-top":"5px"}},P={class:"content"},M=t("td",{colspan:"1",style:{"text-align":"right"}},"课程号",-1),T={colspan:"1"},x=t("td",{colspan:"1",style:{"text-align":"right"}},"课程名",-1),j={colspan:"1"},z=t("td",{colspan:"1",style:{"text-align":"right"}},"学分",-1),G={colspan:"1"},H=t("td",{colspan:"1",style:{"text-align":"right"}},"资料路径",-1),J={colspan:"1"},K=t("td",{colspan:"1",style:{"text-align":"right"}},"前序课",-1),O={colspan:"1"},Q=["value"],R={colspan:"2"};function W(s,o,r,X,Y,Z){return a(),n(m,null,[t("div",b,[E,t("div",C,[t("div",k,[t("button",{class:"commButton",onClick:o[0]||(o[0]=e=>s.addItem())},"添加")]),t("div",w,[L,l(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>s.numName=e),style:{"margin-left":"10px",width:"230px"}},null,512),[[i,s.numName]]),t("button",{style:{"margin-left":"5px"},class:"commButton",onClick:o[2]||(o[2]=e=>s.query())},"查询")])]),t("div",I,[t("table",A,[$,(a(!0),n(m,null,p(s.courseList,e=>(a(),n("tr",{key:e.courseId},[t("td",null,u(e.num),1),t("td",null,u(e.name),1),t("td",null,u(e.credit),1),t("td",null,u(e.coursePath),1),t("td",null,u(e.preCourse),1),t("td",null,[t("button",{class:"table_edit_button",onClick:h=>s.editItem(e)},"编辑",8,S),t("button",{class:"table_delete_button",onClick:h=>s.deleteItem(e.courseId)},"删除",8,q)])]))),128))])])]),t("dialog",V,[U,t("div",N,[t("table",P,[t("tr",null,[M,t("td",T,[l(t("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>s.form.num=e),style:{width:"97%"}},null,512),[[i,s.form.num]])])]),t("tr",null,[x,t("td",j,[l(t("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>s.form.name=e),style:{width:"97%"}},null,512),[[i,s.form.name]])])]),t("tr",null,[z,t("td",G,[l(t("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>s.form.credit=e),style:{width:"97%"}},null,512),[[i,s.form.credit]])])]),t("tr",null,[H,t("td",J,[l(t("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>s.form.coursePath=e),style:{width:"97%"}},null,512),[[i,s.form.coursePath]])])]),t("tr",null,[K,t("td",O,[l(t("select",{class:"commInput","onUpdate:modelValue":o[7]||(o[7]=e=>s.form.preCourseId=e)},[(a(!0),n(m,null,p(s.courseSelectList,e=>(a(),n("option",{key:e.id,value:e.id},u(e.title),9,Q))),128))],512),[[F,s.form.preCourseId]])])]),t("tr",null,[t("td",R,[t("button",{class:"commButton",onClick:o[8]||(o[8]=e=>s.close()),style:{"margin-right":"30px"}},"取消"),t("button",{class:"commButton",onClick:o[9]||(o[9]=e=>s.confirm())},"确认")])])])])])],64)}const ot=v(D,[["render",W]]);export{ot as default};
