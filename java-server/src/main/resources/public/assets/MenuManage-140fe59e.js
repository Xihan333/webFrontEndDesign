import{d as g,D as o,_ as y,c as m,e,q as N,s as T,h as v,n as a,w as r,v as u,y as c,F as b,G as k,o as f}from"./index-f7ad59d0.js";/* empty css             *//* empty css                 */import{g as D,a as h,m as I,b as C}from"./systemServ-e269404b.js";import{m as d,a as w}from"./messageBox-72a6a563.js";const A=g({data:()=>({nodes:[],editedNode:{},currentNode:{},roleList:[],dialogTitle:"",disabled:!1,editType:0,roleAdmin:!1,roleStudent:!1,roleTeacher:!1,defaultProps:{children:"children",label:"label"}}),async created(){this.roleList=await D(),this.nodes=await h()},methods:{addItemFirst(){this.editedNode={},this.editedNode.pid=null,this.editedNode.parentTitle="",this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加一级菜单对话框",this.disabled=!1,this.editType=0,o("favDialog").show()},addItem(t){this.currentNode=t,this.editedNode={},this.editedNode.pid=this.currentNode.id,this.editedNode.parentTitle=this.currentNode.title,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.dialogTitle="添加菜单对话框",this.disabled=!1,this.editType=1,o("favDialog").show()},editItem(t){this.currentNode=t,this.editedNode=this.currentNode,this.roleAdmin=!1,this.roleStudent=!1,this.roleTeacher=!1,this.currentNode.userTypeIds!=null&&this.currentNode.userTypeIds!=null&&this.currentNode.userTypeIds!=""&&(this.currentNode.userTypeIds.indexOf("1")>=0?this.roleAdmin=!0:this.roleAdmin=!1,this.currentNode.userTypeIds.indexOf("2")>=0?this.roleStudent=!0:this.roleStudent=!1,this.currentNode.userTypeIds.indexOf("3")>=0?this.roleTeacher=!0:this.roleTeacher=!1),this.dialogTitle="修改菜单对话框",this.disabled=!0,this.editType=2,o("favDialog").show()},close(){o("favDialog").close()},async confirm(){this.close(),this.roleAdmin,this.roleStudent,this.roleAdmin;const t=await I(this.editType,this.editedNode);t.code==0?(d(this,"保存成功"),this.nodes=await h()):d(this,t.msg)},async deleteItem(t){if(this.currentNode=t,!await w("确认删除吗?"))return;const l=await C(this.currentNode.id);l.code==0?(d(this,"删除成功"),this.nodes=await h()):d(this,l.msg)}}});const B={class:"base_form"},x=e("div",{class:"base_header"},[e("div",{class:"blue_column"}),e("div",{class:"base_title"},"菜单管理")],-1),E={class:"base_query_oneLine"},F={class:"query_left"},S={key:0,class:"custom-tree-container"},$={class:"custom-tree-node"},V=["onClick"],M=["onClick"],L=["onClick"],O={id:"favDialog",onclose:"close()",style:{position:"absolute",top:"300px",left:"300px",width:"300px",height:"310px"}},q={class:"base_title"},U={class:"dialog-div",style:{"margin-top":"5px"}},G={class:"dialog-content"},P=e("td",{colspan:"1",style:{"text-align":"right"}},"父节点",-1),R={colspan:"1"},j=e("td",{colspan:"1",style:{"text-align":"right"}},"主键ID",-1),z={colspan:"1"},H=["disabled"],J=e("td",{colspan:"1",style:{"text-align":"right"}},"菜单名称",-1),K={colspan:"1"},Q=e("td",{colspan:"1",style:{"text-align":"right"}},"菜单标题",-1),W={colspan:"1"},X=e("td",{colspan:"1",style:{"text-align":"right"}},"角色",-1),Y={colspan:"1"},Z=["checked"],ee=["checked"],te=["checked"],se={colspan:"2"};function ie(t,s,l,oe,de,le){const _=k;return f(),m(b,null,[e("div",B,[x,e("div",E,[e("div",F,[e("button",{style:{"margin-left":"5px"},class:"commButton",onClick:s[0]||(s[0]=(...i)=>t.addItemFirst&&t.addItemFirst(...i))}," 添加一级菜单 ")])]),t.nodes!==null?(f(),m("div",S,[N(_,{data:t.nodes,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:T(({node:i,data:n})=>[e("span",$,[e("span",null,a(i.label),1),e("span",null,[e("a",{onClick:p=>t.addItem(n)}," 添加 ",8,V),e("a",{style:{"margin-left":"5px"},onClick:p=>t.editItem(n)}," 修改 ",8,M),e("a",{style:{"margin-left":"5px"},onClick:p=>t.deleteItem(n)}," 删除 ",8,L)])])]),_:1},8,["data"])])):v("",!0)]),e("dialog",O,[e("div",q,a(t.dialogTitle),1),e("div",U,[e("table",G,[e("tr",null,[P,e("td",R,a(t.editedNode.parentTitle),1)]),e("tr",null,[j,e("td",z,[r(e("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>t.editedNode.id=i),class:"commInput",disabled:t.disabled},null,8,H),[[u,t.editedNode.id]])])]),e("tr",null,[J,e("td",K,[r(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>t.editedNode.value=i),class:"commInput"},null,512),[[u,t.editedNode.value]])])]),e("tr",null,[Q,e("td",W,[r(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>t.editedNode.title=i),class:"commInput"},null,512),[[u,t.editedNode.title]])])]),e("tr",null,[X,e("td",Y,[e("input",{type:"checkbox",checked:t.roleAdmin},null,8,Z),c("管理员 "),e("input",{type:"checkbox",checked:t.roleStudent},null,8,ee),c("学生 "),e("input",{type:"checkbox",checked:t.roleTeacher},null,8,te),c("教师 ")])]),e("tr",null,[e("td",se,[e("button",{class:"commButton",onClick:s[4]||(s[4]=i=>t.close()),style:{"margin-right":"30px","margin-left":"80px"}}," 取消 "),e("button",{class:"commButton",onClick:s[5]||(s[5]=i=>t.confirm())},"确认")])])])])])],64)}const he=y(A,[["render",ie]]);export{he as default};
